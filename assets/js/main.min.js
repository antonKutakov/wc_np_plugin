!function(e){function o(o="",t=""){e(o).append(t)}function t(o="",t=""){e(o).has(t)&&e(o).empty()}e("#myarea").change(function(){e(this).find(":selected").attr("data-selected","selected-option").siblings("option").removeAttr("data-selected")}),e("#mycity").change(function(){e(this).find(":selected").attr("data-selected","selected-option-city").siblings("option").removeAttr("data-selected")}),e("#mywerehouse").change(function(){e(this).find(":selected").attr("data-selected","selected-option-ware").siblings("option").removeAttr("data-selected")}),e("#wusd-settings-form").on("submit",function(o){e(".valid-notice-area").removeClass("error"),e(".valid-notice-city").removeClass("error"),e(".valid-notice-warehouse").removeClass("error"),o.preventDefault();var t=e("#myarea option:selected").val(),a=e("#mycity option:selected").val(),n=e("#mywerehouse option:selected").val();0==t?e(".valid-notice-area").addClass("error"):0==a?e(".valid-notice-city").addClass("error"):0==n?e(".valid-notice-warehouse").addClass("error"):(e(".valid-notice-area").removeClass("error"),e(".valid-notice-city").removeClass("error"),e(".valid-notice-warehouse").removeClass("error"),e.ajax({type:"POST",url:ajaxurl,data:e("#wusd-settings-form").serialize()+"&action=wusd_save_settings",beforeSend:function(){e(".wusd-preloader").css({display:"flex"})},complete:function(){e(".wusd-preloader").css({display:"none"})},success:function(o){console.log(o),e(".wusd-preloader").css({display:"none"})}}))}),e("#myarea").select2({placeholder:"Оберіть область",allowClear:!0}),e("#mycity").select2({placeholder:"Оберіть місто",allowClear:!0}),e("#mywerehouse").select2({}),e("#load_addresses").on("click",function(o){o.preventDefault(),e.ajax({type:"GET",data:"action=wusd_load_addresses",url:ajaxurl,beforeSend:function(){e(".wusd-preloader").css({display:"flex"})},complete:function(){e(".wusd-preloader").css({display:"none"})},success:function(o){console.log(JSON.parse(o)),e(".wusd-preloader").css({display:"none"})},error:function(e){console.log(e)}})}),e(document).ready(function(){e.ajax({type:"GET",data:"action=wusd_preload_addresses",url:ajaxurl,success:function(e){!function(e,t){for(var a=t,n=Object.keys(t).length,r="",s=0;s<n;s++)r+="<option value='"+a[s].Ref+"'>"+a[s].Description+"</option>";o(e,r)}(".area",e=JSON.parse(e))},error:function(e){console.log(e)}})}),e(".area").bind(" change",function(){var a=e(".area option:selected").val();e.ajax({type:"GET",data:"area="+a+"&action=wusd_preload_cities",url:ajaxurl,success:function(a){!function(a,n){t(a,"option");for(var r=n,s=Object.keys(n).length,i=(e("#select").text(),"<option value='0'>Оберіть Місто</option>"),c=0;c<s;c++)i+="<option value='"+r[c].Ref+"'>"+r[c].Description+"</option>";o(a,i)}(".city",JSON.parse(a))},error:function(e){console.log("error")}})}),e(function(){var a=e(".area option:selected").val();e.ajax({type:"GET",data:"area="+a+"&action=wusd_preload_cities",url:ajaxurl,success:function(a){!function(a,n){t(a,"option");for(var r=n,s=Object.keys(n).length,i=e("#select").val(),c="<option value='"+r.filter(function(e){if(e.Description==i)return e})[0].Ref+"' data-selected='selected-option-city'>"+i+"</option>",l=0;l<s;l++)c+="<option value='"+r[l].Ref+"'>"+r[l].Description+"</option>";o(a,c)}(".city",JSON.parse(a))},error:function(e){console.log("error")}})}),e(".city").on("change",function(){var a=e(".city option:selected").text();e.ajax({type:"GET",data:"city="+a+"&action=wusd_preload_warehouses",url:ajaxurl,success:function(e){console.log(e),function(e,a){t(e,"option");for(var n=a,r=Object.keys(a).length,s="<option value='0'>Оберіть Відділення</option>",i=0;i<r;i++)s+="<option value='"+n[i].Ref+"'>"+n[i].Description+"</option>";o(e,s)}(".werehouse",JSON.parse(e))},error:function(e){console.log("error")}})})}(jQuery);